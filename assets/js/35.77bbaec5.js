(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{243:function(s,t,a){"use strict";a.r(t);var n=a(5),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"验证器篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证器篇","aria-hidden":"true"}},[s._v("#")]),s._v(" 验证器篇")]),s._v(" "),a("h2",{attrs:{id:"日常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日常","aria-hidden":"true"}},[s._v("#")]),s._v(" 日常")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("乐趣")]),s._v(" "),a("blockquote",[a("p",[s._v("诸葛亮是一个优秀的程序猿，"),a("br"),s._v("\n每一个锦囊都是应对不同的case而编写的！"),a("br"),s._v("\n但是优秀的程序猿也敌不过更优秀的bug！"),a("br"),s._v("\n六出祈山，"),a("br"),s._v("\n七进中原，"),a("br"),s._v("\n鞠躬尽瘁，"),a("br"),s._v("\n死而后已的诸葛亮只因为有一个错误的case-马谡，"),a("br"),s._v("\n整个结构就被break了！"),a("br")])])]),s._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("h3",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因","aria-hidden":"true"}},[s._v("#")]),s._v(" 原因")]),s._v(" "),a("p",[s._v("为了减少验证器类编码，且不需要示例化，并调用验证器类，为了快速进行参数验证，我做了这个功能。")]),s._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("💡原由")]),s._v(" "),a("p",[s._v("主要参考tp5.1的内置验证器模式: "),a("br")]),s._v(" "),a("p",[s._v("发现编码起来不太友好，\n需要写很多代码，\n而且重复代码很高，\n而我需要简化工作内容，\n所以我就自己写了解析规则。")])]),s._v(" "),a("ul",[a("li",[s._v("ThinkPHP5.1 注解路由："),a("a",{attrs:{href:"https://www.kancloud.cn/manual/thinkphp5_1/354102",target:"_blank",rel:"noopener noreferrer"}},[s._v(" 👉 点我了解 👈 "),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思路","aria-hidden":"true"}},[s._v("#")]),s._v(" 思路")]),s._v(" "),a("p",[s._v("在注解中完成验证器的调用，以及请求参数验证。并且需要更加简洁的方式完成。")]),s._v(" "),a("h2",{attrs:{id:"安装扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装扩展")]),s._v(" "),a("div",{staticClass:"language-composer line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("composer require wangyu/tp-anntation\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"注册thinkphp5-1-middleware中间件注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册thinkphp5-1-middleware中间件注册","aria-hidden":"true"}},[s._v("#")]),s._v(" 注册"),a("code",[s._v("thinkphp5.1")]),s._v(" "),a("code",[s._v("middleware")]),s._v("中间件注册")]),s._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("⚠️注意事项")]),s._v(" "),a("p",[a("code",[s._v("thinkphp5.1")]),s._v(" "),a("code",[s._v("middleware")]),s._v("中间件文件在"),a("code",[s._v("config/middleware.php")])])]),s._v(" "),a("p",[s._v("注册"),a("code",[s._v("验证器")]),s._v("中间件")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认中间件命名空间")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'default_namespace'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'app\\\\http\\\\middleware\\\\'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'ReflexValidate'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \\"),a("span",{pre:!0,attrs:{class:"token package"}},[s._v("WangYu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Validate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启注释验证器，需要的中间件配置，请勿胡乱关闭")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"在路由注册中添加中间件验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在路由注册中添加中间件验证","aria-hidden":"true"}},[s._v("#")]),s._v(" 在"),a("code",[s._v("路由")]),s._v("注册中添加"),a("code",[s._v("中间件")]),s._v("验证")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("thinkphp5.1 原生路由中间件使用")]),s._v("，参考"),a("a",{attrs:{href:"https://www.kancloud.cn/manual/thinkphp5_1/564279",target:"_blank",rel:"noopener noreferrer"}},[s._v(" 👉 点我了解 👈 "),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("例如：")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'hello/:name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'hello'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'Auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'Check'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("TRR")]),s._v(" 模块中间件注册")]),s._v(" "),a("p",[s._v("例如：需要在"),a("code",[s._v("route/route.php")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("\\"),a("span",{pre:!0,attrs:{class:"token package"}},[s._v("WangYu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reflex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'api'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'Auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'ReflexValidate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("TRR")]),s._v(" 类 中间件注册")]),s._v(" "),a("p",[s._v("例如："),a("code",[s._v("application/api/controller/v1/Book.php")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * Class Book\n * @doc('图书类')\n * @group('v1/book')\n * @middleware('ReflexValidate')\n * @package app\\api\\controller\\v1\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Book")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("TRR")]),s._v(" 类方法 中间件注册")]),s._v(" "),a("p",[s._v("例如："),a("code",[s._v("application/api/controller/v1/Book.php")]),s._v("中"),a("code",[s._v("getBook")])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @doc('查询指定bid的图书')\n * @route(':bid','get')\n * @param Request $bid\n * @param('bid','bid的图书','require')\n * @return mixed\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$bid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$result")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" BookModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$bid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"注解验证器参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解验证器参数","aria-hidden":"true"}},[s._v("#")]),s._v(" 注解验证器参数")]),s._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("⚠️注意事项")]),s._v(" "),a("p",[a("code",[s._v("@param")]),s._v("和"),a("code",[s._v("@validate")]),s._v("两者取其一，如果同时存在，"),a("code",[s._v("TRR")]),s._v("默认取"),a("code",[s._v("@validate")])])]),s._v(" "),a("h3",{attrs:{id:"注解验证器参数表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解验证器参数表","aria-hidden":"true"}},[s._v("#")]),s._v(" 注解验证器参数表")]),s._v(" "),a("blockquote",[a("p",[s._v("因为"),a("code",[s._v("|")]),s._v("和"),a("code",[s._v("markdown")]),s._v("语法冲突，所以使用"),a("code",[s._v("#")]),s._v("代替，和注解api markdown档中一样，请大家牢记。")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("名称")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("作用")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("类")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("方法")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("形态")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("举例")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("validate")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("模型验证")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("️")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("☑")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("@validate('验证器名称')")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("@validate('Token')")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("param")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("参数验证，"),a("br"),s._v("验证规则就是thinkphp5.1内置验证规则，"),a("br"),s._v("想扩展，"),a("br"),s._v("先了解"),a("code",[s._v("thinkphp5.1")]),s._v("验证器基类"),a("br"),a("code",[s._v("\\think\\Validate")])]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("️")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("☑")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("@param('名称','阐述','验证规则','默认值')")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("@param('title','标题','require#max:99','2')")])])])]),s._v(" "),a("h3",{attrs:{id:"注解验证器参数使用样例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解验证器参数使用样例","aria-hidden":"true"}},[s._v("#")]),s._v(" 注解验证器参数使用样例")]),s._v(" "),a("h4",{attrs:{id:"validate-注解函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validate-注解函数","aria-hidden":"true"}},[s._v("#")]),s._v(" "),a("code",[s._v("@validate")]),s._v(" 注解函数")]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @doc('创建图书')\n * @route('','post')\n * @validate('Token')\n * @return \\think\\response\\Json\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'class'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'application/api/controller/v1/Book.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'action'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'create'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"param-注解函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#param-注解函数","aria-hidden":"true"}},[s._v("#")]),s._v(" "),a("code",[s._v("@param")]),s._v(" 注解函数")]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @doc('创建图书')\n * @route('','post')\n * @param('name','图书名称','require|graph|length:1,50')\n * @param('img','图书img','require|graph|length:1,16')\n * @return \\think\\response\\Json\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'class'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'application/api/controller/v1/Book.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'action'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'create'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h2",{attrs:{id:"访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问","aria-hidden":"true"}},[s._v("#")]),s._v(" 访问")]),s._v(" "),a("p",[s._v("举例：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在"),a("code",[s._v("TRR")]),s._v("项目"),a("code",[s._v("application/api/controller/v1")]),s._v("下创建"),a("code",[s._v("Goods.php")])]),s._v(" "),a("p",[s._v("内容：")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** Created By wene<china_wangyu@aliyun.com>, Data: 2019/7/3 */")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("v1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * Class Goods\n * @doc(商品测试类)\n * @group('v1/goods')\n * @middleware('Validate')\n * @package app\\api\\controller\\v1\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Goods")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * @doc('创建商品')\n     * @route('','post')\n     * @param('name','图书名称','require|graph|length:1,50')\n     * @param('img','图书img','require|graph|length:1,16')\n     * @return \\think\\response\\Json\n     */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("json")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                     "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'class'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'application/api/controller/v1/Goods.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                     "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'action'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'create'")]),s._v("\n                     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在接口测试工具"),a("code",[s._v("postman")]),s._v("中访问")]),s._v(" "),a("blockquote",[a("p",[s._v("请求地址默认不带项目的网址哈，请自行补充，")])]),s._v(" "),a("p",[s._v("请求方式："),a("code",[s._v("post")]),s._v("\n请求地址：http://你的网址/"),a("code",[s._v("v1/goods")]),s._v("\n请求参数：")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("@validate")]),s._v("模式")]),s._v(" "),a("p",[s._v("情况效果和下面一模一样。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("@param")]),s._v("模式")]),s._v(" "),a("p",[s._v("不带参数，请求结果：")]),s._v(" "),a("div",{staticClass:"language-json5 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json5"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000: 错误内容 . 参数验证 .   图书img不能为空,图书名称不能为空"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request_url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1\\/book"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("带参数的，并且"),a("code",[s._v("img")]),s._v("参数类型错误，请求结果：")]),s._v(" "),a("div",{staticClass:"language-json5 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json5"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000: 错误内容 . 参数验证 .   图书img不能为空"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"request_url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1\\/book"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("如上，证明你已经能成功使用TRR的注解验证器。谢谢您的耐心阅读和使用"),a("code",[s._v("TRR")]),s._v(",我将用更多的时间来让它更加丰富和优秀。")])])])])])},[],!1,null,null,null);t.default=e.exports}}]);